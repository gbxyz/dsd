# NAME

DSD - A Simple DNS Statistics Collecting Daemon

# DESCRIPTION

dsd-db is a script which extracts data from the JSON files generated by the `dsd`
script and imports them into a database.

# USAGE

        dsd [OPTIONS]

# OPTIONS

- --config=FILE

    Specify config file. Defaults to /etc/dsd/dsd.conf

- --stdin

    Read a single JSON structure from STDIN rather than scanning the disk for files.

- --help

    Show help.

# CONFIGURATION OPTIONS

        [dsd]
        (miscellaneous dsd options)

        [db]

        ; DBI DSN
        dsn="DBI:SQLite:dbname=/var/lib/dsd/dsd.sqlite"

        ; username and password (empty if using SQLite)
        user=""
        pass=""

        ; directory where .js files are located
        dir=/var/lib/dsd

        ; 0 to leave files on disk, 1 to delete them once processed
        delete=1

# DATABASE SCHEMA

The following SQL statements can be used to configure an SQLite database for
use with `dsd-db`. You will need to modify them if you want to use a different
database:

        # the 'files' table stores a record of all the files that
        # have been processed:
        CREATE TABLE `files` (
                `filename`  VARCHAR,
                `processed` DATETIME
        );

        # the 'data' table stores the actual data:
        CREATE TABLE `data` (
                `host`    VARCHAR,
                `start`   DATETIME,
                `end`     DATETIME,
                `zone`    VARCHAR,
                `family`  INTEGER,
                `proto`   CHAR(3),
                `rcode`   VARCHAR,
                `queries` INTEGER
        );

# COPYRIGHT

dsd is Copyright 2014 CentralNic Ltd. All rights reserved. This program is free
software; you can redistribute it and/or modify it under the same terms as Perl
itself.
